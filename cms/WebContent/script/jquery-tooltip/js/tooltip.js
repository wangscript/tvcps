(function($){$.fn.tooltip=function(options){var opts=$.extend({},$.fn.tooltip.defaults,options);$('body').append('<div class="tooltipshowpanel"></div>');$(document).mouseover(function(){$('.tooltipshowpanel').hide();});this.each(function(){            if($(this).attr('tip')!=undefined){$(this).hover(function(){if($(this).attr('class')=='tooltipinputok'){return;}$('.tooltipshowpanel').css({left:$.getLeft(this)+'px',top:$.getTop(this)+'px'});if(window.ActiveXObject){$('.tooltipshowpanel').html($(this).attr('tip')+'<iframe src="javascript:false" style="position:absolute;visibility:inherit;top:0px;left:0px;width:200px;height:200px;z-index:-1;filter=\'progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)\';"></iframe>');}else{$('.tooltipshowpanel').html($(this).attr('tip'));}$('.tooltipshowpanel').fadeIn("fast");},function(){$('.tooltipshowpanel').hide();});}			if($(this).attr('valid')!=undefined){$(this).focus(function(){$(this).removeClass('tooltipinputerr');}).blur(function(){var empty='false';if($(this).attr('empty')!=undefined){empty=$(this).attr('empty');}var valid=$(this).attr('valid');var trim='true';if($(this).attr('trim')!=undefined){trim='false';}if(trim=='true'){$(this).val(trimSpace(this.value));}var reg=getRegex(valid);if(trimSpace(this.value).length!=0){if(new RegExp(reg,"g").test(this.value)){$(this).removeClass('tooltipinputerr').addClass('tooltipinputok');}else{$(this).removeClass('tooltipinputok').addClass('tooltipinputerr');}}else{if(empty=='true'){$(this).removeClass('tooltipinputerr').addClass('tooltipinputok');}else{$(this).removeClass('tooltipinputok').addClass('tooltipinputerr');}}if($(this).attr('toupper')=='true'){this.value=this.value.toUpperCase();}});}            if($(this).attr('reg')!=undefined){$(this).focus(function(){$(this).removeClass('tooltipinputerr');}).blur(function(){var thisReg=new RegExp($(this).attr('reg'));if(thisReg.test(this.value)){$(this).removeClass('tooltipinputerr').addClass('tooltipinputok');}else{$(this).removeClass('tooltipinputok').addClass('tooltipinputerr');}if($(this).attr('toupper')=='true'){this.value=this.value.toUpperCase();}});}});        if(opts.onsubmit){$('form').submit(function(){var isSubmit=true;$(this).find('input[valid]').each(function(){var empty='false';if($(this).attr('empty')!=undefined){empty=$(this).attr('empty');}var trim='true';if($(this).attr('trim')!=undefined){trim='false';}if(trim=='true'){$(this).val(trimSpace(this.value));}var valid=$(this).attr('valid');var reg=getRegex(valid);if(trimSpace(this.value).length!=0){if(!new RegExp(reg,"g").test(this.value)){$(this).removeClass('tooltipinputok').addClass('tooltipinputerr');isSubmit=false;}}else if(empty=='false'){$(this).removeClass('tooltipinputok').addClass('tooltipinputerr');isSubmit=false;}});$(this).find('input[reg]').each(function(){var thisReg=new RegExp($(this).attr('reg'));if(!thisReg.test(this.value)){$(this).removeClass('tooltipinputok').addClass('tooltipinputerr');isSubmit=false;}});$(this).find('select[valid]').each(function(){var empty='false';if($(this).attr('empty')!=undefined){empty=$(this).attr('empty');}var trim='true';if($(this).attr('trim')!=undefined){trim='false';}if(trim=='true'){$(this).val(trimSpace(this.value));}var valid=$(this).attr('valid');var reg=getRegex(valid);if(trimSpace(this.value).length!=0){if(!(new RegExp(reg,"g").test(this.value))){$(this).removeClass('tooltipinputok').addClass('tooltipinputerr');isSubmit=false;}}else if(empty=='false'){$(this).removeClass('tooltipinputok').addClass('tooltipinputerr');isSubmit=false;}});$(this).find('select[reg]').each(function(){var thisReg=new RegExp($(this).attr('reg'));if(!thisReg.test(this.value)){$(this).removeClass('tooltipinputok').addClass('tooltipinputerr');isSubmit=false;}});if(isSubmit){jQuery.blockUI({css:{						padding:'10px',backgroundColor:'#000','-webkit-border-radius':'10px','-moz-border-radius':'10px',opacity:'.5',color:'#fff'}});}return isSubmit;});}};$.extend({getWidth:function(object){return object.offsetWidth;},getLeft:function(object){var go=object;var oParent,oLeft=go.offsetLeft;while(go.offsetParent!=null){oParent=go.offsetParent;oLeft +=oParent.offsetLeft;go=oParent;}return oLeft;},getTop:function(object){var go=object;var oParent,oTop=go.offsetTop;while(go.offsetParent!=null){oParent=go.offsetParent;oTop +=oParent.offsetTop;go=oParent;}return oTop + 22;},onsubmit:true});$.fn.tooltip.defaults={onsubmit:true};$(document).ready(function(){jQuery('select[reg],select[valid],input[valid],input[tip],input[reg]').tooltip()});})(jQuery);function getRegex(valid){var reg="";var types=valid.split("|");var begin="^\\s*[";var middle="";var end="]+\\s*$";for(var i=0;i < types.length;i++){if(types[i]=='num'){reg="^\\s*[\\d]+\\s*$";break;}else if(types[i]=='float'){reg="^\\s*[\\d.]+\\s*$";break;}else if(types[i]=='en'){middle +="a-zA-Z";}else if(types[i]=='string'){reg="^\\s*.+\\s*$";break;}else if(types[i]=='ip'){reg="^(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])$";break;}else if(types[i]=='email'){reg="^\\s*[\\w]+@[\\w]+\\.[\\w]+\\s*$";break;}else if(types[i]=='notempty'){reg="^\\s*[^\\s]+\\s*$";break;}else if(types[i]=='identifier'){reg="^\\s*[\\w]+\\s*$";break;}else if(types[i]=='ch'){middle +="\\u4E00-\\u9FA5\\uF900-\\uFA2D";}}if(reg==""){if(middle==""){reg="^\\s*.+\\s*$";}else{reg=begin + middle + end;}}return reg;}function trimSpace(str){return str.replace(/(^\s*)|(\s*$)/g,"");}